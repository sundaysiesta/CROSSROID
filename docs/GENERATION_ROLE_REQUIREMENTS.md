# 世代ロールの必要/不要まとめ

## 世代ロールが必要なコマンド・機能

### 1. `/give` - ロメコイン譲渡
- **必要ロール**: 実行者（譲渡する側）に世代ロールが必要
- **説明**: 他のユーザーにロメコインを譲渡するコマンド
- **エラーメッセージ**: 「❌ ロメコインを譲渡するには世代ロールが必要です。」

### 2. `/duel` - 決闘
- **必要ロール**: 挑戦者と対戦相手の**両方**に世代ロールが必要
- **説明**: 他のユーザーと決闘するコマンド
- **エラーメッセージ**: 
  - 挑戦者: 「あなたは決闘に参加するための世代ロールを持っていません。」
  - 対戦相手: 「対戦相手は決闘に参加するための世代ロールを持っていません。」

### 3. `/duel_russian` - ロシアンルーレット決闘
- **必要ロール**: 挑戦者と対戦相手の**両方**に世代ロールが必要
- **説明**: ロシアンルーレット形式で決闘するコマンド
- **エラーメッセージ**: 
  - 挑戦者: 「あなたは決闘に参加するための世代ロールを持っていません。」
  - 対戦相手（受諾時）: 「あなたは決闘に参加するための世代ロールを持っていません。」

---

## 世代ロールが不要なコマンド・機能

### ロメコイン関連
- `/romecoin` - ロメコインの所持数を確認
- `/romecoin_ranking` - ロメコインランキングを確認

### ゲーム・対戦関連
- `/janken` - じゃんけんを開始（世代ロール不要）
- `/janken_ranking` - じゃんけんのランキングを表示
- `/duel_ranking` - 決闘のランキングを表示
- `/mahjong_create` - 賭け麻雀のテーブルを作成
- `/mahjong_result` - 賭け麻雀の試合結果を入力
- `/mahjong_edit` - 賭け麻雀の試合記録を修正

### 銀行・金融関連
- `/bank deposit` - 銀行に預金
- `/bank withdraw` - 銀行から引き出し
- `/bank info` - 預金情報を確認
- `/loan request` - 借金を貸す
- `/loan repay` - 借金を返済
- `/loan info` - 借金情報を確認

### ショップ・アイテム関連
- `/shop` - ロメコインショップを表示
- `/backpack` - 購入済みの商品を確認

### 株式関連
- `/stock info` - 株価情報を取得
- `/stock buy` - 株を購入（デモ）
- `/stock sell` - 株を売却（デモ）
- `/stock portfolio` - ポートフォリオを確認

### その他
- `/daily` - デイリーログインボーナスを受け取る
- `/anonymous` - 匿名でメッセージを送信
- `/bump` - 部活チャンネルを宣伝
- `/random_mention` - サーバーメンバーをランダムでメンション

### 運営専用コマンド
- `/test_generation` - 世代獲得通知のテスト
- `/test_timereport` - 時報機能のテスト
- `/database_export` - データベースをエクスポート
- `/data_migrate` - データを引き継ぎ
- `/monthly_ranking_rewards` - 月間ランキング賞金付与
- `/popularity_championship_rewards` - 人気者選手権賞金付与
- `/admin_romecoin_add` - ロメコイン増額（管理者専用）
- `/admin_romecoin_deduct` - ロメコイン減額（管理者専用）
- `匿名開示 (運営専用)` - コンテキストメニューコマンド

---

## 補足

### 世代ロールの判定方法
コードでは以下の2つの方法で世代ロールを判定しています：
1. ロール名がローマ数字（I, II, III, IV, Vなど）にマッチする
2. `CURRENT_GENERATION_ROLE_ID`で指定されたロールを持っている

### 注意事項
- 決闘系コマンド（`/duel`, `/duel_russian`）では、**挑戦者と対戦相手の両方**に世代ロールが必要です
- `/give`コマンドでは、**実行者（譲渡する側）のみ**に世代ロールが必要で、受け取る側には不要です
- じゃんけん（`/janken`）は世代ロール不要ですが、決闘（`/duel`）は世代ロールが必要です

