# ショップシステム詳細

## 📋 目次

1. [概要](#概要)
2. [商品一覧](#商品一覧)
3. [購入方法](#購入方法)
4. [購入済み商品の確認](#購入済み商品の確認)
5. [データ管理](#データ管理)

---

## 概要

ロメコインショップでは、ロメコインを使って特別な権限やアイテムを購入できます。

**コマンド**: `/shop`

**制限**:
- 世代ロール必須
- 商品は一度購入すると再度購入できません

---

## 商品一覧

### 1. ログ閲覧権限ロール

**価格**: 25,000コイン

**説明**: ロメダの管理ログ・廃部ログ・過去ログが読めるようになります

**ロールID**: `SHOP_LOG_VIEWER_ROLE_ID`

**注意**: 一回の買い切りです

---

### 2. 絵文字作成権ロール

**価格**: 30,000コイン

**説明**: サーバーで絵文字を作成できるようになります

**ロールID**: `SHOP_EMOJI_CREATOR_ROLE_ID`

**注意**: 一回の買い切りです

---

## 購入方法

### ステップ1: ショップを開く
```
/shop
```

### ステップ2: 商品を選択
セレクトメニューから購入する商品を選択します。

### ステップ3: 購入確認
購入確認ダイアログが表示されます。
- 「購入する」を選択すると購入が完了します
- 「キャンセル」を選択すると購入がキャンセルされます

### ステップ4: 購入完了
購入が完了すると、自動的にロールが付与されます。

---

## 購入済み商品の確認

**コマンド**: `/backpack`

**表示内容**:
- 購入済み商品一覧
- 購入日時

**例**:
```
🎒 バックパック
購入済みの商品 (2件)

📦 ログ閲覧権限ロール
<@&ロールID>
購入日: 2024/1/1 12:00:00

📦 絵文字作成権ロール
<@&ロールID>
購入日: 2024/1/2 12:00:00
```

---

## データ管理

### ショップデータ

**ファイル名**: `shop_data.json`

**場所**: `data/shop_data.json`

**データ構造**:
```json
{
  "userId": {
    "log_viewer_role": {
      "purchasedAt": 購入日時（タイムスタンプ）
    },
    "emoji_creator_role": {
      "purchasedAt": 購入日時（タイムスタンプ）
    }
  }
}
```

---

### クールダウン

**サーバー間クールダウン**: 30秒

同じサーバー内で30秒以内に複数回購入することはできません。

---

## 関連ドキュメント

- [COMMANDS_OVERVIEW.md](./COMMANDS_OVERVIEW.md) - コマンド一覧
- [ROMECOIN_SYSTEM.md](./ROMECOIN_SYSTEM.md) - ロメコインシステムの詳細

